package com.app.Service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;

import com.app.Custom_Exception.ResourceNotFoundException;
import com.app.Entities.User;
import com.app.Repository.UserRepository;
import com.app.dto.AuthRequestDTO;
import com.app.dto.AuthResponseDTO;

public class UserServiceImpl implements UserService {

	@Autowired
	private UserRepository userrepo;
	
	
	@Override
	public List<User> getAllUsers() {
		
		return userrepo.findAll();
	}

	@Override
	public User addUserDetails(User transientUser) {
		
		return userrepo.save(transientUser);
	}

	@Override
	public User getUserbyid(int userid) {	
		return userrepo.findById(userid)
				.orElseThrow(()-> new ResourceNotFoundException("Invalid User id, can't get User Details!!!"));
	}

	public AuthResponseDTO authenticateUser(AuthRequestDTO request) {
		User user=userrepo.findbyEmailAndPassword(request.getEmail(),request.getPassword())
				.orElseThrow(() -> new ResourceNotFoundException("User not found : invalid email and password"));
				
 
// @formatter:on

	}
	@Override
	public String deleteUserDetails(int userid) {
		String msg="User id is Invalid!, can't be deleted!";
		if(userrepo.existsById(userid)) {
			userrepo.deleteById(userid);
			msg="User with id="+userid+" deleted!";
		}
		return msg;
	}

}
